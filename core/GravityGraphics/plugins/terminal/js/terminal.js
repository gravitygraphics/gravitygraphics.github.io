function _0x4f9f(n,t){var e=_0x4ed9();return(_0x4f9f=function(n,t){return e[n-=238]})(n,t)}var _0x3d1795=_0x4f9f;!function(){for(var n=_0x4f9f,t=_0x4ed9();;)try{if(547405==+parseInt(n(366))+parseInt(n(280))/2+parseInt(n(306))/3+-parseInt(n(336))/4+-parseInt(n(371))/5*(-parseInt(n(343))/6)+-parseInt(n(242))/7+-parseInt(n(339))/8*(parseInt(n(349))/9))break;t.push(t.shift())}catch(n){t.push(t.shift())}}();var initStage=0,fileContents="",T1_folder="./";function loadScript(n,t){var e=_0x4f9f,i=document[e(360)](e(278))[0],a=document[e(341)](e(316));a.type="text/javascript",a[e(276)]=n,a.onreadystatechange=t,a.onload=t,i[e(332)](a)}function _0x4ed9(){var n=["clear","keydown","substring","2933688yfcagU","buffer printChar----------cursor.x:","line","getContext","fillStyle","screen","prompt","files","erase1 - terminal_instance.line.row:","getNewPositionX before----------cursor.x:","script","input","width","4 after: newline == false. terminal_instance.cursor.x:","URL","msSaveOrOpenBlob","amplify","voice_enabled","flag_ready","cursor_top","print enter draw prompt","floor","vendor/speak-js/speakClient.js","ceil","3 before: newline == false. terminal_instance.cursor.x:","scrollUp","appendChild","#C0C0C0","cursor","drawing prompt","591304Difssh","vendor/beepjs/beep.js","removeEventListener","10635832IKTQnh","getImageData","createElement","#FFFFFF","1002nsnygf","row","cursor_height","undefined","erase uncaught","body","9FPGSQU","enabled","ctx","parseInput","buffer printEnter----------cursor.x:","navigator","has_prompt","mesh","canvas","print enter no draw prompt","fromCharCode","getElementsByTagName","click","rows","slice","printEnter","print","973712Ibvqwj","blinkCounter","stop interval","set","string","7415BCoaVE","prompt_text","shift","removeChild","2 after: newline == false. terminal_instance.cursor.x:","6381998vKuUtK","revokeObjectURL","createObjectURL","onload","5 position new line and cursor.x:","fillRect","font","text","12pt commodore","0123456789ABCDEF","log","keyCode","length","onKeypress","fillText","erase","game","getNewPositionY","#000","5 draw_prompt:","cols","text_color","printChar","blink","trim","utils","measureText","js/T1commands.js","addEventListener","erase2","6: after cursor.x:","result","draw","keypress","src","green","head","random","1474310ukDpHa","cursor_width","color","#000000"," terminal_instance.cursor.y:","sound","height","speak","line_height","putImageData","beep","top","app","download","readAsText","terminal_instance.text.width:","padding_bottom","T1000canvas","getNewPositionX","prompt_color_random","16px II40","preventDefault","play"];return(_0x4ed9=function(){return n})()}function download(n,t,e){var i,a,r=_0x4f9f,e=new Blob([n],{type:e});window[r(354)][r(321)]?window[r(354)][r(321)](e,t):(i=document[r(341)]("a"),a=URL[r(244)](e),i.href=a,i[r(293)]=t,document[r(348)][r(332)](i),i[r(361)](),setTimeout(function(){var n=r;document.body[n(240)](i),window[n(320)][n(243)](a)},0))}function commands(n){}var settings={cols:40,rows:20,line_height:20,padding_bottom:10,text_color:"#C0C0C0",text_height:20,prompt_text:"]",font:_0x3d1795(300),cursor_top:4,cursor_width:16,cursor_height:18,prompt_color_random:!1},print_buffer="",file_contents="",terminal_instance="",intervalID=null,ctx_instance=null;function loadFileAsText(n){var e=_0x3d1795,t=n[e(313)][0],n=new FileReader;n[e(245)]=function(n){var t=e;fileContents=print_buffer=n.target[t(273)],terminal.text[t(364)](!1),terminal.print()},n[e(294)](t,"UTF-8")}function initTerminal(n){var t=_0x3d1795;(terminal_instance=n)[t(262)]=settings[t(262)],n[t(362)]=settings.rows,n[t(308)][t(286)]=settings[t(288)],n[t(296)]=settings[t(296)],n[t(249)][t(282)]=settings[t(263)],n[t(249)][t(286)]=settings.text_height,n[t(248)]=settings[t(248)],n[t(334)][t(291)]=settings[t(325)],n[t(334)][t(318)]=settings[t(281)],n.cursor[t(286)]=settings[t(345)],n[t(357)].id=t(297),window.addEventListener(t(304),n.onKeydown),window[t(270)](t(275),n[t(255)]),n[t(351)]=n[t(357)][t(309)]("2d"),n[t(351)][t(248)]=n[t(248)];var e=n.ctx[t(268)]("W");n[t(249)][t(318)]=Math[t(329)](e[t(318)]),n[t(312)].width=n[t(249)][t(318)]*n.prompt[t(249)].length,n[t(334)].x=0,n[t(334)].y=0,n[t(311)][t(303)](),n.prompt[t(249)]=settings[t(238)],n.prompt.color=settings.text_color,initStage=1,intervalID=setInterval(terminal_instance.cursor.blink,300),loadScript(T1_folder+t(337),function(){}),loadScript(T1_folder+t(328),function(){}),loadScript(T1_folder+t(269),function(){})}function delay(t=.05){return new Promise(n=>setTimeout(n,1e3*t))}function input(){return new Promise(i=>{var a=_0x4f9f;document.addEventListener(a(304),function n(t){var e=a;13===t.keyCode&&(document[e(338)]("keydown",n),i())})})}function classTerminal(){var l=_0x3d1795;this[l(356)],this[l(357)]=document[l(341)](l(357)),this[l(351)],this[l(311)]=new function(){var e=l;this[e(331)]=function(){var n=e,t=terminal_instance.ctx[n(340)](0,0,terminal_instance[n(351)].canvas.width,terminal_instance[n(351)][n(357)][n(286)]);terminal_instance[n(351)][n(289)](t,0,-terminal_instance[n(308)][n(286)]),terminal_instance[n(351)][n(310)]=n(283),terminal_instance[n(351)][n(247)](0,terminal_instance.ctx[n(357)][n(286)]-terminal_instance[n(308)][n(286)],terminal_instance[n(351)][n(357)][n(318)],terminal_instance[n(351)].canvas[n(286)]),terminal_instance[n(351)][n(247)](0,0,terminal_instance[n(351)][n(357)][n(318)],2)},this[e(303)]=function(){var n=e;terminal_instance[n(351)].fillStyle=n(283),terminal_instance[n(351)].fillRect(0,0,terminal_instance.ctx[n(357)][n(318)],terminal_instance[n(351)].canvas.height)},this[e(298)]=function(n=!1){var t=e;0==n?(console[t(252)]("1 before: newline == false. terminal_instance.cursor.x:"+terminal_instance[t(334)].x),terminal_instance[t(334)].x+=terminal_instance.text.width,console[t(252)](t(241)+terminal_instance[t(334)].x)):(console[t(252)](t(295)+terminal_instance[t(249)][t(318)]),console[t(252)](t(330)+terminal_instance[t(334)].x),terminal_instance[t(334)].x+=0,console[t(252)](t(319)+terminal_instance[t(334)].x)),terminal_instance[t(334)].x>=terminal_instance[t(351)][t(357)].width&&(terminal_instance[t(334)].x=0,terminal_instance[t(334)].y+=terminal_instance.line.height,terminal_instance[t(308)][t(344)]+=1,console[t(252)](t(246)+terminal_instance[t(334)].x)),terminal_instance.cursor.y+terminal_instance[t(308)][t(286)]>terminal_instance[t(351)][t(357)][t(286)]&&(terminal_instance.screen[t(331)](),terminal_instance[t(334)].y-=terminal_instance[t(308)].height)},this[e(259)]=function(n=!0){var t=e;terminal_instance[t(334)].y+=terminal_instance[t(308)].height,n?(console[t(252)](t(261)+n),terminal_instance[t(334)].x=terminal_instance.prompt[t(318)]-terminal_instance[t(249)][t(318)],console.log("5 cursor.x:"+terminal_instance[t(334)].x+t(284)+terminal_instance[t(334)].y)):(console.log("6: before cursor.x:"+terminal_instance[t(334)].x+" draw_prompt:"+n),terminal_instance[t(334)].x=0,console[t(252)](t(272)+terminal_instance.cursor.x+t(284)+terminal_instance[t(334)].y)),terminal_instance.cursor.y+terminal_instance.line[t(286)]>terminal_instance[t(351)].canvas[t(286)]&&(terminal_instance.screen[t(331)](),terminal_instance.cursor.y-=terminal_instance[t(308)][t(286)])}},this[l(249)]=new function(){var e=l;this[e(318)]=20,this.height=20,this[e(282)]=e(333),this[e(370)]="",this[e(274)]=function(n){var t=e,n=String[t(359)](n);terminal_instance[t(308)][t(249)]+=n,terminal_instance[t(351)].font=terminal_instance[t(248)],terminal_instance[t(351)][t(310)]=terminal_instance[t(249)][t(282)],terminal_instance[t(351)].fillText(n,terminal_instance.cursor.x,terminal_instance[t(334)].y+terminal_instance[t(308)][t(286)])},this[e(365)]=function(n){var t=e;terminal_instance[t(351)][t(248)]=terminal_instance.font,terminal_instance[t(351)].fillStyle=terminal_instance.text[t(282)],terminal_instance[t(351)][t(256)](n,terminal_instance.cursor.x,terminal_instance[t(334)].y+terminal_instance.line[t(286)])},this[e(264)]=function(n){var t=e;terminal_instance[t(334)][t(257)](),terminal_instance[t(249)][t(365)](n),terminal_instance[t(311)][t(298)](),terminal_instance[t(334)][t(274)]()},this.printEnter=function(n=!0){var t=e;terminal_instance.cursor.erase(),terminal_instance.line.row=0,terminal_instance[t(311)][t(259)](n),n?(terminal_instance[t(308)][t(355)]=!0,console[t(252)](t(326)),0==print_buffer[t(254)]&&terminal_instance[t(312)][t(274)](settings[t(299)])):(terminal_instance[t(308)][t(355)]=!1,console[t(252)](t(358)))},this[e(257)]=function(){var n=e;console[n(252)](n(314)+terminal_instance[n(308)][n(344)]),0<terminal_instance[n(334)].x&&0==terminal_instance.line.has_prompt||terminal_instance[n(334)].x>terminal_instance.prompt[n(318)]&&1==terminal_instance.line[n(355)]?(terminal_instance[n(334)][n(257)](),console[n(252)](n(271)),terminal_instance[n(334)].x-=this.width,terminal_instance[n(334)].x<0&&(terminal_instance[n(334)].y-=terminal_instance[n(308)].height,terminal_instance[n(334)].x=terminal_instance.ctx[n(357)].width-this[n(318)],--terminal_instance[n(308)][n(344)]),terminal_instance[n(351)][n(310)]="darkgreen",terminal_instance[n(351)].fillRect(terminal_instance[n(334)].x,terminal_instance[n(334)].y+terminal_instance[n(334)][n(291)],terminal_instance[n(334)][n(318)],terminal_instance[n(334)].height)):console[n(252)](n(347))}},this.line=new function(){var n=l;this[n(286)]=20,this[n(344)]=0,this[n(249)]="",this.has_prompt=!1},this[l(334)]=new function(){var t=l;this.x=0,this.y=0,this[t(318)]=16,this[t(286)]=18,this[t(291)]=4,this[t(274)]=function(){var n=t;terminal_instance[n(334)].x<terminal_instance[n(312)][n(318)]&&0==terminal_instance[n(308)][n(344)]?(terminal_instance[n(351)][n(310)]=n(277),terminal_instance.ctx.fillRect(terminal_instance.cursor.x,terminal_instance[n(334)].y+terminal_instance[n(334)][n(291)],terminal_instance[n(334)].width,terminal_instance[n(334)][n(286)])):(terminal_instance.ctx.fillStyle=n(277),terminal_instance.ctx.fillRect(terminal_instance[n(334)].x,terminal_instance[n(334)].y+terminal_instance[n(334)][n(291)],terminal_instance.cursor.width,terminal_instance[n(334)][n(286)]))},this[t(257)]=function(){var n=t;terminal_instance[n(351)].fillStyle=n(260),terminal_instance[n(351)][n(247)](terminal_instance[n(334)].x,terminal_instance.cursor.y+terminal_instance.cursor[n(291)],terminal_instance[n(334)][n(318)],terminal_instance[n(334)].height)},this[t(265)]=function(){var n=t;switch(terminal_instance.blinkCounter%3){case 1:terminal_instance.cursor[n(274)](),terminal_instance.blinkCounter++;break;case 2:terminal_instance[n(334)][n(274)](),terminal_instance[n(367)]++;break;default:terminal_instance.cursor[n(257)](),terminal_instance.blinkCounter=1}initStage<2&&(0==print_buffer[n(254)]&&(terminal_instance.cursor.draw(),terminal_instance[n(312)].draw(!1)),initStage+=1),terminal_instance[n(324)]=!0}},this[l(312)]=new function(){var e=l;this[e(318)]="",this[e(282)]=e(342),this[e(249)]="]",this[e(274)]=function(){var n=e;console[n(252)](n(335)),terminal_instance[n(249)][n(370)]=terminal_instance[n(312)][n(249)],terminal_instance[n(351)][n(248)]=terminal_instance.font,settings[n(299)]&&(this[n(282)]=function n(){var t=l,e=t(251),i="#";for(var a=0;a<6;a++)i+=e[Math[t(327)](16*Math[t(279)]())];var r=i[t(305)](1),s=parseInt(r,16),c=s>>16&255,r=s>>8&255,s=s>>0&255,s=.2126*c+.7152*r+.0722*s;return s<40&&(i=n()),i}()),terminal_instance[n(351)][n(310)]=this.color,terminal_instance[n(351)][n(256)](terminal_instance[n(249)].string,0,terminal_instance[n(334)].y+terminal_instance[n(308)][n(286)])},this[e(369)]=function(n){var t=e;this[t(249)]=n,terminal_instance[t(312)][t(318)]=terminal_instance[t(249)][t(318)]*terminal_instance[t(312)][t(249)][t(254)]}},this[l(324)]=!1,this[l(262)]=40,this.rows=20,this[l(367)]=0,this[l(296)]=10,this.font=l(250),this.settings={},this[l(292)]="",this.sound=new function(){var i=l;this[i(350)]=!0,this[i(323)]=!0,this[i(290)]=function(n){var t=i,e=n[t(239)]();typeof e!=t(346)&&0!=terminal_instance[t(285)][t(350)]&&new Beep(22050)[t(302)](e[0],e[1],[Beep[t(267)][t(322)](8e3)],function(){terminal_instance[t(285)].beep(n)})},this[i(287)]=function(n,t=10){var e=i;void 0!==n&&0!=terminal_instance[e(285)][e(350)]&&0!=terminal_instance.sound[e(323)]&&speak(n,{pitch:t})}},this[l(365)]=async function(n){var t=l;if("string"==typeof n||n instanceof String)return print_buffer+=n+"\n",void terminal_instance.print();0<print_buffer[t(254)]?(n=print_buffer[t(305)](0,1),print_buffer=print_buffer.slice(1,print_buffer[t(254)]),"\n"==n?terminal_instance[t(249)][t(364)](!1):terminal_instance.text[t(264)](n),await delay(.05),terminal_instance.print()):0==print_buffer.length?print_buffer=!1:0==print_buffer&&(console[t(252)](t(368)),clearInterval(intervalID),print_buffer=!0,terminal_instance[t(311)][t(298)](!0))},this.input=async function(n){var t=l;if(typeof n===t(370)||n instanceof String)return print_buffer+=n+"\n",void terminal_instance.input();0<print_buffer.length?(n=print_buffer[t(305)](0,1),print_buffer=print_buffer[t(363)](1,print_buffer[t(254)]),"\n"==n?(console.log(t(353)+terminal_instance[t(334)].x),terminal_instance[t(249)].printEnter(!1)):(console[t(252)](t(307)+terminal_instance[t(334)].x),terminal_instance[t(249)][t(264)](n)),await delay(.05),terminal_instance[t(317)]()):0==print_buffer[t(254)]?print_buffer=!1:0==print_buffer&&(print_buffer=!0,console[t(252)](t(315)+terminal_instance[t(334)].x),terminal_instance.screen[t(298)](!0),console[t(252)]("getNewPositionX after----------cursor.x:"+terminal_instance[t(334)].x),terminal_instance[t(334)][t(274)](),await input())},this.onKeydown=function(n){var t=l;8===n.keyCode?(terminal_instance[t(308)][t(249)]=terminal_instance.line[t(249)].substring(0,terminal_instance[t(308)].text[t(254)]-1),n[t(301)](),terminal_instance[t(249)][t(257)]()):13==n[t(253)]&&(clearInterval(intervalID),commands(terminal_instance[t(308)][t(249)][t(266)]()),"jot"==terminal_instance[t(292)]&&""!=terminal_instance[t(308)].text[t(266)]()&&(fileContents=fileContents+terminal_instance[t(308)][t(249)]+"\n"),terminal_instance[t(292)]==t(258)&&""!=terminal_instance[t(308)][t(249)][t(266)]()&&system[t(352)](),1==print_buffer&&terminal_instance[t(249)][t(364)](),terminal_instance[t(308)][t(249)]=""),terminal_instance.flag_ready=!0},this[l(255)]=function(n){var t=l,e=n.which||n[t(253)];n[t(301)](),terminal_instance[t(334)][t(257)](),terminal_instance.line.row<terminal_instance[t(362)]&&(terminal_instance[t(308)][t(344)]==terminal_instance[t(362)]-1?terminal_instance[t(334)].x<terminal_instance.ctx[t(357)][t(318)]-terminal_instance[t(249)].width&&(terminal_instance[t(249)][t(274)](e),terminal_instance.screen[t(298)]()):(terminal_instance[t(249)][t(274)](e),terminal_instance[t(311)][t(298)]())),terminal_instance[t(324)]=!0}}export{initTerminal,classTerminal};